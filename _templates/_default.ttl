@doctype html
@include ./_head.ttl
@include ./_header.ttl
@include ./_disqus.ttl
@include ./_footer.ttl
    
<html>
  <head> ${ _head.body() }
  <body>
    <div #page>
      <div #header> ${ _header.body() }
      <div #container>
        @for fpath, metadata, htmltext  in page.articles :
          <article> ${ article(fpath, htmltext) }
      @if disqus :
        <div #myblog_disqus> ${ _disqus.body() }
    <hr>
    <div #footer> ${ _footer.body() }


@def article(fpath, htmltext) :
  <div .title> ${title}
  <div .pagemeta>
    @@ date = globals().get( 'date', globals()['last_modified'] )
    @if 'author' in globals() :
      <span .author> by ${author} -
    <span .date> ${date}

  <div .content> ${ htmltext }
